(function(){"use strict";var e={5565:function(e,n,t){var l=t(9242),a=t(3396);function i(e,n,t,l,i,o){const u=(0,a.up)("BookMarks");return(0,a.wg)(),(0,a.j4)(u)}var o=t(6520),u=(t(7658),t(4870)),d=t(7139),s=t(4605),r=t(3520),c=t(8742),f=t(4786),p=t(3018),g=t(7786),h=t(9762),v=t(1302);function w(e,n){return n<0||e<n}function m(e,n){let t=e.indexOf(n);t>=0&&e.length>0&&e.splice(t,1)}const U={key:0,style:{width:"100%"}};var x=(0,a.aZ)({__name:"Tree",props:{data:{type:Object,required:!0},setting:{type:Object,required:!0}},setup(e){const n=e;function t(e){e.isLeaf?window.location.href=e.url:e.isExpand?(e.isExpand=!1,w(e.deep,n.setting.expandedDeep)?(n.setting.defaultUnExpandId.push(e.id),console.log(JSON.stringify(n.setting.defaultUnExpandId))):m(n.setting.defaultExpandId,e.id)):(e.isExpand=!0,w(e.deep,n.setting.expandedDeep)?m(n.setting.defaultUnExpandId,e.id):(n.setting.defaultExpandId.push(e.id),console.log(JSON.stringify(n.setting.defaultExpandId))))}const i=(0,u.iH)(n.data);return(e,o)=>{const w=(0,a.up)("tree",!0);return(0,a.wg)(),(0,a.iD)("div",U,[i.value?((0,a.wg)(),(0,a.j4)((0,u.SU)(s.ZP),{key:0,style:(0,d.j5)({display:i.value.isSearchResult?"":"none"})},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(r.ZP),{size:"small",quaternary:"",style:{width:"100%","justify-content":"left",padding:"0%"},onClick:o[0]||(o[0]=e=>t(i.value))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(i.value.title),1)])),icon:(0,a.w5)((()=>[i.value.isLeaf?((0,a.wg)(),(0,a.j4)((0,u.SU)(c.Z),{key:0,src:i.value.icon,lazy:"",width:16,height:16,"preview-disabled":""},null,8,["src"])):((0,a.wg)(),(0,a.j4)((0,u.SU)(f.g),{key:1,size:16,class:(0,d.C_)(i.value.isExpand?"":"rotate")},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(v.Z))])),_:1},8,["class"]))])),_:1}),(0,a.Wm)(l.uT,{name:"sub-tree"},{default:(0,a.w5)((()=>[i.value.isLeaf?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)((0,u.SU)(s.ZP),{key:0,"has-sider":"",style:(0,d.j5)({display:i.value.isExpand?"":"none"})},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(p.Z),{width:17,style:{padding:"0"}},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(g.Z),{vertical:"",style:{height:"100%"}})])),_:1}),(0,a.Wm)((0,u.SU)(h.Z),{"content-style":"witdh:100%"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.value.childrens,(e=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(w,{data:e,setting:n.setting},null,8,["data","setting"])])))),256))])),_:1})])),_:1},8,["style"]))])),_:1})])),_:1},8,["style"])):(0,a.kq)("",!0)])}}}),y=t(89);const S=(0,y.Z)(x,[["__scopeId","data-v-ea5c7160"]]);var k=S,_=t(5941),E=t(4404),Z=t(2289),b=t(6028),O=t(9518),W=t(1283),j=t(2037),I=t(4719),P=t(2550);const D=(0,a._)("div",null,"展示列数",-1),C=(0,a._)("div",null,"最大展开深度",-1);var R=(0,a.aZ)({__name:"BookMarks",setup(e){const n=(0,u.iH)([]),t=new URL(chrome.runtime.getURL("/_favicon/")).toString(),l=(0,u.qj)({showColumns:4,expandedDeep:4,defaultExpandId:[],defaultUnExpandId:[]}),i=(0,u.iH)({bookMarks:!1,setting:!1}),o=(0,u.iH)(""),d=(0,u.iH)(!1);function s(e){e.isSearchResult=!0;for(let n=0;n<e.childrens.length;++n)s(e.childrens[n])}function c(e,n){if(e.isSearchResult=e.title.includes(n)||e.url.includes(n),!e.isLeaf)if(e.isSearchResult)s(e);else for(let t=0;t<e.childrens.length;++t)e.isSearchResult=c(e.childrens[t],n)||e.isSearchResult;return e.isSearchResult}function p(e){for(let t=0;n.value&&t<n.value.length;++t)c(n.value[t],e)}function g(){for(let e=0;n.value&&e<n.value.length;++e)h(n.value[e])}function h(e){if(console.log(l.defaultExpandId),console.log(l.defaultUnExpandId),-1!=l.defaultExpandId.indexOf(e.id)?e.isExpand=!0:-1!=l.defaultUnExpandId.indexOf(e.id)?e.isExpand=!1:e.isExpand=w(e.deep,l.expandedDeep),console.log(e.title,e.isExpand),!e.isLeaf)for(let n=0;n<e.childrens.length;++n)h(e.childrens[n])}function v(e){const t=(e[0].children[0].children||[]).concat(e[0].children[1]||[]);for(let l=0;t&&l<t.length;++l)n.value.push(m(t[l],1));i.value.bookMarks=!0}function m(e,n){let l=[];for(let t=0;e.children&&t<e.children.length;t++)l.push(m(e.children[t],n+1));return{id:e.id,title:e.title,url:e.url||"",childrens:l,isLeaf:0==l.length,isExpand:!0,icon:t+"?pageUrl="+e.url+"&size=16",deep:n,isSearchResult:!0}}function U(e){let n=JSON.parse(e["setting"]||"{}");console.log(JSON.stringify(n)),n&&(l.showColumns=n.showColumns||4,l.expandedDeep=n.expandedDeep||4,l.defaultExpandId=n.defaultExpandId||[],l.defaultUnExpandId=n.defaultUnExpandId||[],i.value.setting=!0),console.log(JSON.stringify(l))}function x(){chrome.bookmarks.getTree(v),chrome.storage.local.get("setting").then(U)}function y(e,n,t){if(-1!=t.indexOf(e.id)&&n.push(e.id),!e.isLeaf)for(let l=0;l<e.childrens.length;++l)y(e.childrens[l],n,t)}function S(){const e=[],t=[];for(let a=0;n.value&&a<n.value.length;++a)y(n.value[a],e,l.defaultExpandId),y(n.value[a],t,l.defaultUnExpandId);chrome.storage.local.set({setting:JSON.stringify(l)}),console.log("save",JSON.stringify(l.defaultExpandId),JSON.stringify(l.defaultUnExpandId))}function R(){chrome.storage.local.clear()}return(0,a.YP)((()=>i),(()=>{i.value.bookMarks&&i.value.setting&&g()}),{deep:!0}),(0,a.bv)(x),(e,t)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)((0,u.SU)(_.Z),{justify:"end"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(E.Z),{value:o.value,"onUpdate:value":t[0]||(t[0]=e=>o.value=e),placeholder:"Filter","on-change":p},{prefix:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(f.g),{size:"20"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(I.Z))])),_:1})])),_:1},8,["value"]),(0,a.Wm)((0,u.SU)(r.ZP),{onClick:t[1]||(t[1]=e=>d.value=!0)},{icon:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(f.g),{size:"20"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(P.Z))])),_:1})])),_:1}),(0,a.Wm)((0,u.SU)(Z.Z),{show:d.value,"onUpdate:show":t[4]||(t[4]=e=>d.value=e),width:502},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(b.Z),null,{header:(0,a.w5)((()=>[(0,a.Uk)(" 设置 ")])),footer:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(r.ZP),{onClick:R},{default:(0,a.w5)((()=>[(0,a.Uk)(" 清除配置 ")])),_:1}),(0,a.Wm)((0,u.SU)(r.ZP),{onClick:S},{default:(0,a.w5)((()=>[(0,a.Uk)(" 保存 ")])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(_.Z),{vertical:""},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(O.Z),{cols:"4"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(W.ZP),{span:"1",style:{display:"flex","align-items":"center"}},{default:(0,a.w5)((()=>[D])),_:1}),(0,a.Wm)((0,u.SU)(W.ZP),{span:"3"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(j.Z),{value:l.showColumns,"onUpdate:value":t[2]||(t[2]=e=>l.showColumns=e),min:1},null,8,["value"])])),_:1})])),_:1}),(0,a.Wm)((0,u.SU)(O.Z),{cols:"4"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(W.ZP),{span:"1",style:{display:"flex","align-items":"center"}},{default:(0,a.w5)((()=>[C])),_:1}),(0,a.Wm)((0,u.SU)(W.ZP),{span:"3"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,u.SU)(j.Z),{value:l.expandedDeep,"onUpdate:value":t[3]||(t[3]=e=>l.expandedDeep=e),min:0},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1}),i.value.bookMarks&&i.value.setting?((0,a.wg)(),(0,a.j4)((0,u.SU)(O.Z),{key:0,style:{width:"100%"},cols:l.showColumns},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.value,((e,n)=>((0,a.wg)(),(0,a.j4)((0,u.SU)(W.ZP),{key:n,span:"1"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{data:e,setting:l},null,8,["data","setting"])])),_:2},1024)))),128))])),_:1},8,["cols"])):(0,a.kq)("",!0)],64))}});const L=R;var H=L,J=function(e,n,t,l){var a,i=arguments.length,o=i<3?n:null===l?l=Object.getOwnPropertyDescriptor(n,t):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,n,t,l);else for(var u=e.length-1;u>=0;u--)(a=e[u])&&(o=(i<3?a(o):i>3?a(n,t,o):a(n,t))||o);return i>3&&o&&Object.defineProperty(n,t,o),o};let M=class extends o.w3{};M=J([(0,o.Ei)({components:{BookMarks:H}})],M);var N=M;const q=(0,y.Z)(N,[["render",i]]);var z=q;(0,l.ri)(z).mount("#app")}},n={};function t(l){var a=n[l];if(void 0!==a)return a.exports;var i=n[l]={exports:{}};return e[l](i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(n,l,a,i){if(!l){var o=1/0;for(r=0;r<e.length;r++){l=e[r][0],a=e[r][1],i=e[r][2];for(var u=!0,d=0;d<l.length;d++)(!1&i||o>=i)&&Object.keys(t.O).every((function(e){return t.O[e](l[d])}))?l.splice(d--,1):(u=!1,i<o&&(o=i));if(u){e.splice(r--,1);var s=a();void 0!==s&&(n=s)}}return n}i=i||0;for(var r=e.length;r>0&&e[r-1][2]>i;r--)e[r]=e[r-1];e[r]=[l,a,i]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var l in n)t.o(n,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:n[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,l){var a,i,o=l[0],u=l[1],d=l[2],s=0;if(o.some((function(n){return 0!==e[n]}))){for(a in u)t.o(u,a)&&(t.m[a]=u[a]);if(d)var r=d(t)}for(n&&n(l);s<o.length;s++)i=o[s],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(r)},l=self["webpackChunkbookmark3"]=self["webpackChunkbookmark3"]||[];l.forEach(n.bind(null,0)),l.push=n.bind(null,l.push.bind(l))}();var l=t.O(void 0,[998],(function(){return t(5565)}));l=t.O(l)})();
//# sourceMappingURL=app.70c861f6.js.map